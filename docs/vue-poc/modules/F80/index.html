<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta http-equiv="Generator" content="xqdoca - https://github.com/quodatum/xqdoca"><title>vue-poc - xqDocA
        </title><link rel="shortcut icon" type="image/x-icon" href="../../resources/xqdoc.png"><link rel="stylesheet" type="text/css" href="../../resources/prism.css"><link rel="stylesheet" type="text/css" href="../../resources/page.css"><link rel="stylesheet" type="text/css" href="../../resources/query.css"><link rel="stylesheet" type="text/css" href="../../resources/base.css"></head><body class="home" id="top"><div id="main"><div><h1><span class="badge badge-info">quodatum:vue.api</span>&nbsp;
			<small>library module</small><div style="float:right"><span class="badge badge-success" title="RESTXQ">U</span></div></h1><nav id="toc"><h2><a href="../../index.html">vue-poc</a>
                / Module
       </h2><h3><a id="contents"></a><span class="">quodatum:vue.api</span></h3><ol class="toc"><li><a href="#summary"><span class="secno">1 </span><span class="content">Summary</span></a></li><li><a href="#imports"><span class="secno">2 </span><span class="content">Imports</span></a></li><li><a href="#variables"><span class="secno">3 </span><span class="content">Variables</span></a><ol class="toc"></ol></li><li><a href="#functions"><span class="secno">4 </span><span class="content">Functions</span></a><ol class="toc"><li><a href="#vue-api:repo"><span class="secno">4.1</span><span class="content" title="">vue-api:repo<div style="float:right"><span class="badge badge-success" title="RESTXQ">U</span></div></span></a></li><li><a href="#vue-api:start"><span class="secno">4.2</span><span class="content" title="">vue-api:start<div style="float:right"><span class="badge badge-success" title="RESTXQ">U</span></div></span></a></li><li><a href="#vue-api:test-html"><span class="secno">4.3</span><span class="content" title="">vue-api:test-html<div style="float:right"><span class="badge badge-success" title="RESTXQ">U</span></div></span></a></li><li><a href="#vue-api:test-select"><span class="secno">4.4</span><span class="content" title="">vue-api:test-select<div style="float:right"><span class="badge badge-success" title="RESTXQ">U</span></div></span></a></li><li><a href="#vue-api:upload"><span class="secno">4.5</span><span class="content" title="">vue-api:upload<div style="float:right"><span class="badge badge-success" title="RESTXQ">U</span></div></span></a></li><li><a href="#vue-api:user"><span class="secno">4.6</span><span class="content" title="">vue-api:user<div style="float:right"><span class="badge badge-success" title="RESTXQ">U</span></div></span></a></li><li><a href="#vue-api:wadl"><span class="secno">4.7</span><span class="content" title="">vue-api:wadl<div style="float:right"><span class="badge badge-success" title="RESTXQ">U</span></div></span></a></li></ol></li><li><a href="#namespaces"><span class="secno">5 </span><span class="content">Namespaces</span></a></li><li><a href="#restxq"><span class="secno">6 </span><span class="content">Restxq</span></a><ol class="toc"><xsl:for-each-group xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="qd:restxq($funs)" group-by="doc:literal/string()"><xsl:sort select="current-grouping-key()"></xsl:sort><xsl:variable name="id" select="current-grouping-key()"></xsl:variable><li><a href="# TODO"><span class="secno"><xsl:value-of select="concat('5.',position())"></xsl:value-of></span><span class="content"><xsl:value-of select="current-grouping-key()"></xsl:value-of></span></a></li></xsl:for-each-group></ol></li><li><a href="#source"><span class="secno">7 </span><span class="content">Source</span></a></li></ol></nav><div class="div2"><h2><a id="summary"></a>1 Summary</h2><dl><dt class="label">Summary</dt><dd>vue-poc api.</dd><dt>Tags</dt><dd><p>Author: Andy Bunce may-2017</p><p>__source : api.xqm</p></dd></dl>,
		<div> Imported by <a href="../../imports.html#quodatum:vue.api">*</a></div>,
    <ul><li style="display:inline">Raw XML files: </li><li style="display:inline"><a href="xqdoc.xml" target="xqdoc">xqdoc.xml</a>, </li><li style="display:inline"><a href="xqparse.xml" target="xqparse">xqparse.xml</a></li></ul></div><div class="div2"><h2><a id="imports"></a>2 Imports</h2><p>
    This module is imported by
    <span class="badge badge-info">0</span> modules, it imports
    <span class="badge badge-info">3</span> modules.
    </p><div style="display: flex;width:100%; justify-content: space-between;"><div style="width:40%;">(None)</div><div style="display: flex; flex-direction: column; justify-content: center;"><div><div>imports</div>→</div><div class="badge badge-info">this</div><div><div>imports</div>→</div></div><div style="width:40%;"><div><span class="badge badge-warning" title="Externally defined">http://exquery.org/ns/restxq</span></div><div><span class="badge badge-warning" title="Externally defined">http://basex.org/modules/session</span></div><div><span><a href="../../modules/F82/index.html" title="models.gen.xqm">quodatum.models.generated</a></span></div></div></div></div><div class="div2"><h2><a id="variables"></a>3 Variables
			</h2><p>None</p></div><div class="div2"><h2><a id="functions"></a>4 Functions</h2><div class="div3"><h3><a id="vue-api:repo"></a><a id="{quodatum:vue.api}repo#0"></a>4.1&nbsp;vue-api:repo<div style="float:right"><a href="#vue-api:repo">#</a></div></h3><p>Arities: <span style="margin-left:1em"><a href="#vue-api:repo#0">vue-api:repo#0</a><span class="badge badge-success" title="RESTXQ">U</span></span></p><dt class="label">Summary</dt><dd>repo list</dd><dt class="label">Signature</dt><dd><div class="proto"><code class="function">vue-api:repo</code>
		  ( 
			
	 )
			<code class="as">&nbsp;as&nbsp;</code><code class="return-type"><xqdoc:type xmlns:xqdoc="http://www.xqdoc.org/1.0">element(json)</xqdoc:type></code></div></dd><dt class="label">Return</dt><dd><ul><li><code class="return-type">element(json)</code></li></ul></dd><details><summary>Source</summary><pre><code class="language-xquery">function vue-api:repo()
as element(json)
{
 let $jlist:=repo:list()
 return &lt;json type="array"&gt;
 {for $j in $jlist
 return &lt;_ type="object"&gt;
  &lt;name&gt;{$j}&lt;/name&gt;
 &lt;/_&gt;
 }&lt;/json&gt;
}</code></pre></details><details><summary>References 1 functions from 1 modules </summary><ul><li><span class="badge badge-warning" title="Externally defined">{http://basex.org/modules/repo}list#1</span></li></ul></details><details><summary>Invoked by 0 functions from 0 modules</summary><ul></ul></details><details><summary>Annotations</summary><table class="data"><tbody><tr><td><code class="function">%rest:GET</code></td><td><code class="arg"></code></td></tr><tr><td><code class="function">%rest:path</code></td><td><code class="arg">/vue-poc/api/repo</code></td></tr><tr><td><code class="function">%output:method</code></td><td><code class="arg">json</code></td></tr></tbody></table></details></div><div class="div3"><h3><a id="vue-api:start"></a><a id="{quodatum:vue.api}start#0"></a>4.2&nbsp;vue-api:start<div style="float:right"><a href="#vue-api:start">#</a></div></h3><p>Arities: <span style="margin-left:1em"><a href="#vue-api:start#0">vue-api:start#0</a><span class="badge badge-success" title="RESTXQ">U</span></span></p><dt class="label">Summary</dt><dd>get status</dd><dt class="label">Signature</dt><dd><div class="proto"><code class="function">vue-api:start</code>
		  ( 
			
	 )
			<code class="as">&nbsp;as&nbsp;</code><code class="return-type"><xqdoc:type xmlns:xqdoc="http://www.xqdoc.org/1.0" occurrence="*">item()</xqdoc:type>*</code></div></dd><dt class="label">Return</dt><dd><ul><li><code class="return-type">item()*</code></li></ul></dd><details><summary>Source</summary><pre><code class="language-xquery">function vue-api:start( )   
{
  if(db:exists("vue-poc")) then
   ()
  else 
  ()
}</code></pre></details><details><summary>References 1 functions from 1 modules </summary><ul><li><span class="badge badge-warning" title="Externally defined">{http://basex.org/modules/db}exists#1</span></li></ul></details><details><summary>Invoked by 0 functions from 0 modules</summary><ul></ul></details><details><summary>Annotations</summary><table class="data"><tbody><tr><td><code class="function">%rest:GET</code></td><td><code class="arg"></code></td></tr><tr><td><code class="function">%rest:path</code></td><td><code class="arg">/vue-poc/api/start</code></td></tr></tbody></table></details></div><div class="div3"><h3><a id="vue-api:test-html"></a><a id="{quodatum:vue.api}test-html#0"></a>4.3&nbsp;vue-api:test-html<div style="float:right"><a href="#vue-api:test-html">#</a></div></h3><p>Arities: <span style="margin-left:1em"><a href="#vue-api:test-html#0">vue-api:test-html#0</a><span class="badge badge-success" title="RESTXQ">U</span></span></p><dt class="label">Summary</dt><dd>generate html report for test</dd><dt class="label">Signature</dt><dd><div class="proto"><code class="function">vue-api:test-html</code>
		  ( 
			
	 )
			<code class="as">&nbsp;as&nbsp;</code><code class="return-type"><xqdoc:type xmlns:xqdoc="http://www.xqdoc.org/1.0">element()</xqdoc:type></code></div></dd><dt class="label">Return</dt><dd><ul><li><code class="return-type">element()</code></li></ul></dd><details><summary>Source</summary><pre><code class="language-xquery">function vue-api:test-html()   
{
&lt;div id="A0"&gt;
something
&lt;ol&gt;
&lt;li&gt;&lt;a href="#A30" &gt;A30&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#A50"&gt;A50&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
{for $i in 1 to 50 return &lt;p&gt;{$i}: 
&lt;a id="A{$i}" name="A{$i}"&gt;Lorem ipsum&lt;/a&gt; dolor sit amet, consectetur adipiscing elit. Morbi aliquam sodales justo, aliquet eleifend ex bibendum eget. Nullam vitae maximus ipsum. Sed maximus felis in interdum maximus. Vestibulum quis urna vel dolor placerat iaculis non at metus. Curabitur nec dictum mauris. Duis placerat magna non pellentesque pulvinar. Nam a eleifend sapien. Suspendisse potenti. Vestibulum nunc massa, eleifend a dolor quis, feugiat condimentum est. Integer diam eros, blandit in purus in, euismod ultrices felis. Donec ipsum magna, elementum non lacus vel, rutrum ornare ante. Integer egestas sapien quam, ut posuere nisi rhoncus nec. Etiam ornare enim eu tellus laoreet, in laoreet urna sodales. Donec interdum, augue non lobortis sodales, leo elit tincidunt mi, vitae varius augue libero vel lectus. Cras imperdiet quis dolor nec gravida. 
&lt;a href="#A0"&gt;top&lt;/a&gt;&lt;/p&gt;
}
&lt;/div&gt;
}</code></pre></details><details><summary>Invoked by 0 functions from 0 modules</summary><ul></ul></details><details><summary>Annotations</summary><table class="data"><tbody><tr><td><code class="function">%rest:GET</code></td><td><code class="arg"></code></td></tr><tr><td><code class="function">%rest:path</code></td><td><code class="arg">/vue-poc/api/test/html</code></td></tr><tr><td><code class="function">%output:method</code></td><td><code class="arg">html</code></td></tr><tr><td><code class="function">%output:version</code></td><td><code class="arg">5.0</code></td></tr></tbody></table></details></div><div class="div3"><h3><a id="vue-api:test-select"></a><a id="{quodatum:vue.api}test-select#1"></a>4.4&nbsp;vue-api:test-select<div style="float:right"><a href="#vue-api:test-select">#</a></div></h3><p>Arities: <span style="margin-left:1em"><a href="#vue-api:test-select#1">vue-api:test-select#1</a><span class="badge badge-success" title="RESTXQ">U</span></span></p><dt class="label">Summary</dt><dd>Returns test list for select.</dd><dt class="label">Signature</dt><dd><div class="proto"><code class="function">vue-api:test-select</code>
		  ( 
			<code class="arg">$q</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>
	 )
			<code class="as">&nbsp;as&nbsp;</code><code class="return-type"><xqdoc:type xmlns:xqdoc="http://www.xqdoc.org/1.0">element()</xqdoc:type></code></div></dd><dt class="label">Parameters</dt><dd><ul><li>q<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></li></ul></dd><dt class="label">Return</dt><dd><ul><li><code class="return-type">element()</code></li></ul></dd><details><summary>Source</summary><pre><code class="language-xquery">function vue-api:test-select($q )   
{
  &lt;json   type="object" &gt;
            &lt;items type="array"&gt;
            {(1 to 100)!(&lt;_ type="object"&gt;
             &lt;name&gt;A{ . }&lt;/name&gt;
             &lt;value&gt;V{ . }&lt;/value&gt;
            &lt;/_&gt;)}              
            &lt;/items&gt;
  &lt;/json&gt;
}</code></pre></details><details><summary>Invoked by 0 functions from 0 modules</summary><ul></ul></details><details><summary>Annotations</summary><table class="data"><tbody><tr><td><code class="function">%rest:path</code></td><td><code class="arg">/vue-poc/api/test-select</code></td></tr><tr><td><code class="function">%rest:query-param</code></td><td><code class="arg">q,{$q}</code></td></tr><tr><td><code class="function">%rest:produces</code></td><td><code class="arg">application/json</code></td></tr><tr><td><code class="function">%output:method</code></td><td><code class="arg">json</code></td></tr></tbody></table></details></div><div class="div3"><h3><a id="vue-api:upload"></a><a id="{quodatum:vue.api}upload#1"></a>4.5&nbsp;vue-api:upload<div style="float:right"><a href="#vue-api:upload">#</a></div></h3><p>Arities: <span style="margin-left:1em"><a href="#vue-api:upload#1">vue-api:upload#1</a><span class="badge badge-success" title="RESTXQ">U</span></span></p><dt class="label">Signature</dt><dd><div class="proto"><code class="function">vue-api:upload</code>
		  ( 
			<code class="arg">$files</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>
	 )
			<code class="as">&nbsp;as&nbsp;</code><code class="return-type"><xqdoc:type xmlns:xqdoc="http://www.xqdoc.org/1.0" occurrence="*">item()</xqdoc:type>*</code></div></dd><dt class="label">Parameters</dt><dd><ul><li>files<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></li></ul></dd><dt class="label">Return</dt><dd><ul><li><code class="return-type">item()*</code></li></ul></dd><details><summary>Source</summary><pre><code class="language-xquery">function vue-api:upload($files) {
  for $name    in map:keys($files)
  let $content := $files($name)
  let $path    := file:temp-dir() || $name
  return (
    file:write-binary($path, $content),
    &lt;file name="{ $name }" size="{ file:size($path) }"/&gt;
  )
}</code></pre></details><details><summary>References 4 functions from 2 modules </summary><ul><li><span class="badge badge-warning" title="Externally defined">{http://expath.org/ns/file}size#1</span></li><li><span class="badge badge-warning" title="Externally defined">{http://expath.org/ns/file}temp-dir#1</span></li><li><span class="badge badge-warning" title="Externally defined">{http://expath.org/ns/file}write-binary#2</span></li><li><span class="badge badge-warning" title="Externally defined">{http://www.w3.org/2005/xpath-functions/map}keys#1</span></li></ul></details><details><summary>Invoked by 0 functions from 0 modules</summary><ul></ul></details><details><summary>Annotations</summary><table class="data"><tbody><tr><td><code class="function">%rest:POST</code></td><td><code class="arg"></code></td></tr><tr><td><code class="function">%rest:path</code></td><td><code class="arg">/vue-poc/api/upload</code></td></tr><tr><td><code class="function">%rest:form-param</code></td><td><code class="arg">files,{$files}</code></td></tr></tbody></table></details></div><div class="div3"><h3><a id="vue-api:user"></a><a id="{quodatum:vue.api}user#0"></a>4.6&nbsp;vue-api:user<div style="float:right"><a href="#vue-api:user">#</a></div></h3><p>Arities: <span style="margin-left:1em"><a href="#vue-api:user#0">vue-api:user#0</a><span class="badge badge-success" title="RESTXQ">U</span></span></p><dt class="label">Summary</dt><dd>user list</dd><dt class="label">Signature</dt><dd><div class="proto"><code class="function">vue-api:user</code>
		  ( 
			
	 )
			<code class="as">&nbsp;as&nbsp;</code><code class="return-type"><xqdoc:type xmlns:xqdoc="http://www.xqdoc.org/1.0">element(json)</xqdoc:type></code></div></dd><dt class="label">Return</dt><dd><ul><li><code class="return-type">element(json)</code></li></ul></dd><details><summary>Source</summary><pre><code class="language-xquery">function vue-api:user()
as element(json)
{
 let $jlist:=user:list
 return &lt;json type="array"&gt;
 {for $j in $jlist
 return &lt;_ type="object"&gt;
  &lt;name&gt;{$j}&lt;/name&gt;
 &lt;/_&gt;
 }&lt;/json&gt;
}</code></pre></details><details><summary>Invoked by 0 functions from 0 modules</summary><ul></ul></details><details><summary>Annotations</summary><table class="data"><tbody><tr><td><code class="function">%rest:GET</code></td><td><code class="arg"></code></td></tr><tr><td><code class="function">%rest:path</code></td><td><code class="arg">/vue-poc/api/user</code></td></tr><tr><td><code class="function">%output:method</code></td><td><code class="arg">json</code></td></tr></tbody></table></details></div><div class="div3"><h3><a id="vue-api:wadl"></a><a id="{quodatum:vue.api}wadl#0"></a>4.7&nbsp;vue-api:wadl<div style="float:right"><a href="#vue-api:wadl">#</a></div></h3><p>Arities: <span style="margin-left:1em"><a href="#vue-api:wadl#0">vue-api:wadl#0</a><span class="badge badge-success" title="RESTXQ">U</span></span></p><dt class="label">Summary</dt><dd>Returns wadl.</dd><dt class="label">Signature</dt><dd><div class="proto"><code class="function">vue-api:wadl</code>
		  ( 
			
	 )
			<code class="as">&nbsp;as&nbsp;</code><code class="return-type"><xqdoc:type xmlns:xqdoc="http://www.xqdoc.org/1.0">element()</xqdoc:type></code></div></dd><dt class="label">Return</dt><dd><ul><li><code class="return-type">element()</code></li></ul></dd><details><summary>Source</summary><pre><code class="language-xquery">function vue-api:wadl()   
{
 rest:wadl()
}</code></pre></details><details><summary>References 1 functions from 1 modules </summary><ul><li><span class="badge badge-warning" title="Externally defined">{http://exquery.org/ns/restxq}wadl#1</span></li></ul></details><details><summary>Invoked by 0 functions from 0 modules</summary><ul></ul></details><details><summary>Annotations</summary><table class="data"><tbody><tr><td><code class="function">%rest:path</code></td><td><code class="arg">/vue-poc/api</code></td></tr></tbody></table></details></div></div><div class="div2"><h2><a id="namespaces"></a>5 Namespaces</h2><p>The following namespaces are defined:</p><table class="data" style="float:none"><thead><tr><th>Prefix</th><th>Uri</th></tr></thead><tbody><tr><td>c</td><td><span class="badge badge-warning" title="Externally defined">http://www.w3.org/ns/xproc-step</span></td></tr><tr><td>entity</td><td><span><a href="../../modules/F82/index.html" title="models.gen.xqm">quodatum.models.generated</a></span></td></tr><tr><td>output</td><td><span class="badge badge-warning" title="Externally defined">http://www.w3.org/2010/xslt-xquery-serialization</span></td></tr><tr><td>rest</td><td><span class="badge badge-warning" title="Externally defined">http://exquery.org/ns/restxq</span></td></tr><tr><td>session</td><td><span class="badge badge-warning" title="Externally defined">http://basex.org/modules/session</span></td></tr><tr><td>vue-api</td><td><span><a href="../../modules/F6/index.html" title="features\edit\edit.xqm">quodatum:vue.api</a>&nbsp;<a href="../../modules/F27/index.html" title="features\tasks\model.build\rxq-model.xqm"><span class="badge badge-info">2</span></a>&nbsp;<a href="../../modules/F36/index.html" title="features\tasks\xqdoc\rxq-xqdoc.xqm"><span class="badge badge-info">3</span></a>&nbsp;<a href="../../modules/F80/index.html" title="api.xqm"><span class="badge badge-info">4</span></a></span></td></tr><tr><td>wadl</td><td><span class="badge badge-warning" title="Externally defined">http://wadl.dev.java.net/2009/02</span></td></tr></tbody></table></div><div class="div2"><h2><a id="restxq"></a>6 RestXQ</h2><p>Paths defined 7.</p><table class="data"><thead><tr><th>Path</th><th>Details</th></tr></thead><tbody><tr><td><a href="#vue-api:wadl#0">/vue-poc/api</a></td><td>vue-api:wadl#0</td></tr><tr><td><a href="#vue-api:repo#0">/vue-poc/api/repo</a></td><td>vue-api:repo#0</td></tr><tr><td><a href="#vue-api:start#0">/vue-poc/api/start</a></td><td>vue-api:start#0</td></tr><tr><td><a href="#vue-api:test-select#1">/vue-poc/api/test-select</a></td><td>vue-api:test-select#1</td></tr><tr><td><a href="#vue-api:test-html#0">/vue-poc/api/test/html</a></td><td>vue-api:test-html#0</td></tr><tr><td><a href="#vue-api:upload#1">/vue-poc/api/upload</a></td><td>vue-api:upload#1</td></tr><tr><td><a href="#vue-api:user#0">/vue-poc/api/user</a></td><td>vue-api:user#0</td></tr></tbody></table></div><div class="div2"><h2><a id="source"></a>7 Source Code</h2><pre><code class="language-xquery">xquery version "3.1";
(:~
 : vue-poc api.
 :
 : @author Andy Bunce may-2017
 :)
module namespace vue-api = 'quodatum:vue.api';
import module namespace rest = "http://exquery.org/ns/restxq";
import module namespace session = "http://basex.org/modules/session";
import module namespace entity = 'quodatum.models.generated' at "models.gen.xqm";



declare namespace c="http://www.w3.org/ns/xproc-step";

declare namespace wadl="http://wadl.dev.java.net/2009/02";

(:~
 : get status
 :)
declare
%rest:GET %rest:path("/vue-poc/api/start")
 function vue-api:start( )   
{
  if(db:exists("vue-poc")) then
   ()
  else 
  ()
};



(:~
 : Returns test list for select.
 :)
declare
%rest:path("/vue-poc/api/test-select")
%rest:query-param("q", "{$q}")
%rest:produces("application/json")
%output:method("json")   
function vue-api:test-select($q )   
{
  &lt;json   type="object" &gt;
            &lt;items type="array"&gt;
            {(1 to 100)!(&lt;_ type="object"&gt;
             &lt;name&gt;A{ . }&lt;/name&gt;
             &lt;value&gt;V{ . }&lt;/value&gt;
            &lt;/_&gt;)}              
            &lt;/items&gt;
  &lt;/json&gt;
};

(:~
 : generate html report for test
 :)
declare
%rest:GET %rest:path("/vue-poc/api/test/html")
%output:method("html")  %output:version("5.0") 
function vue-api:test-html()   
{
&lt;div id="A0"&gt;
something
&lt;ol&gt;
&lt;li&gt;&lt;a href="#A30" &gt;A30&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#A50"&gt;A50&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
{for $i in 1 to 50 return &lt;p&gt;{$i}: 
&lt;a id="A{$i}" name="A{$i}"&gt;Lorem ipsum&lt;/a&gt; dolor sit amet, consectetur adipiscing elit. Morbi aliquam sodales justo, aliquet eleifend ex bibendum eget. Nullam vitae maximus ipsum. Sed maximus felis in interdum maximus. Vestibulum quis urna vel dolor placerat iaculis non at metus. Curabitur nec dictum mauris. Duis placerat magna non pellentesque pulvinar. Nam a eleifend sapien. Suspendisse potenti. Vestibulum nunc massa, eleifend a dolor quis, feugiat condimentum est. Integer diam eros, blandit in purus in, euismod ultrices felis. Donec ipsum magna, elementum non lacus vel, rutrum ornare ante. Integer egestas sapien quam, ut posuere nisi rhoncus nec. Etiam ornare enim eu tellus laoreet, in laoreet urna sodales. Donec interdum, augue non lobortis sodales, leo elit tincidunt mi, vitae varius augue libero vel lectus. Cras imperdiet quis dolor nec gravida. 
&lt;a href="#A0"&gt;top&lt;/a&gt;&lt;/p&gt;
}
&lt;/div&gt;
};
(:~
 : Returns wadl.
 :)
declare
%rest:path("/vue-poc/api")
function vue-api:wadl()   
{
 rest:wadl()
};

(:~
 :  user list
 :)
declare  
%rest:GET %rest:path("/vue-poc/api/user")
%output:method("json")   
function vue-api:user()
as element(json)
{
 let $jlist:=user:list
 return &lt;json type="array"&gt;
 {for $j in $jlist
 return &lt;_ type="object"&gt;
  &lt;name&gt;{$j}&lt;/name&gt;
 &lt;/_&gt;
 }&lt;/json&gt;
};

(:~
 :  repo list
 :)
declare  
%rest:GET %rest:path("/vue-poc/api/repo")
%output:method("json")   
function vue-api:repo()
as element(json)
{
 let $jlist:=repo:list()
 return &lt;json type="array"&gt;
 {for $j in $jlist
 return &lt;_ type="object"&gt;
  &lt;name&gt;{$j}&lt;/name&gt;
 &lt;/_&gt;
 }&lt;/json&gt;
};

declare
  %rest:POST
  %rest:path("/vue-poc/api/upload")
  %rest:form-param("files", "{$files}")
function vue-api:upload($files) {
  for $name    in map:keys($files)
  let $content := $files($name)
  let $path    := file:temp-dir() || $name
  return (
    file:write-binary($path, $content),
    &lt;file name="{ $name }" size="{ file:size($path) }"/&gt;
  )
};</code></pre></div></div></div><div class="footer"><p style="text-align:right">Generated by 
            <a href="https://github.com/Quodatum/xqdoca" target="_blank">xqDocA</a> 
            at <span title="2019-05-29T12:58:24.547+01:00">12.58pm on Wednesday, May 29th 2019</span></p></div><script src="../../resources/prism.js" type="text/javascript"></script></body></html>