<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0"><xqdoc:control><xqdoc:date>2019-06-07T17:23:03.708+01:00</xqdoc:date><xqdoc:version>1.1</xqdoc:version></xqdoc:control><xqdoc:module type="main"><xqdoc:uri>tree-tests.xq</xqdoc:uri><xqdoc:comment><xqdoc:description>test tree</xqdoc:description></xqdoc:comment><xqdoc:body>xquery version "3.1";
(:~ 
 : test tree
 :)
import module namespace tree = 'quodatum.data.tree' at "tree.xqm";

declare variable $TEST1:=(

    "/api/environment",
    "/api/execute",
    "/api/library",
    "/api/library/{$id}"
);



declare %unit:test
(:~
 : smoke test
 :)
function tree:test(){
    let $t:=tree:build($TEST1) 
    return unit:assert(fn:true(),$t)
};

declare %unit:test
function tree:test3(){
    let $t:=unparsed-text-lines("tree-data/paths.txt") 
    return unit:assert(fn:true(),$t)
};

tree:build($TEST1)/directory[@name="api"]
</xqdoc:body></xqdoc:module><xqdoc:imports><xqdoc:import type="library"><xqdoc:uri>quodatum.data.tree</xqdoc:uri></xqdoc:import></xqdoc:imports><xqdoc:namespaces><xqdoc:namespace prefix="tree" uri="quodatum.data.tree"/><xqdoc:namespace prefix="unit" uri="http://basex.org/modules/unit"/><xqdoc:namespace prefix="local" uri="http://www.w3.org/2005/xquery-local-functions"/></xqdoc:namespaces><xqdoc:variables><xqdoc:variable><xqdoc:name>TEST1</xqdoc:name><xqdoc:type occurrence="*">item()</xqdoc:type></xqdoc:variable></xqdoc:variables><xqdoc:functions><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description>smoke test</xqdoc:description></xqdoc:comment><xqdoc:name>tree:test</xqdoc:name><xqdoc:annotations><xqdoc:annotation name="unit:test"/></xqdoc:annotations><xqdoc:signature>declare %unit:test function tree:test() as item()*</xqdoc:signature><xqdoc:return><xqdoc:type occurrence="*">item()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>quodatum.data.tree</xqdoc:uri><xqdoc:name>build</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://basex.org/modules/unit</xqdoc:uri><xqdoc:name>assert</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>true</xqdoc:name></xqdoc:invoked><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>TEST1</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>t</xqdoc:name></xqdoc:ref-variable><xqdoc:body>function tree:test(){
    let $t:=tree:build($TEST1) 
    return unit:assert(fn:true(),$t)
}</xqdoc:body></xqdoc:function><xqdoc:function arity="0"><xqdoc:name>tree:test3</xqdoc:name><xqdoc:annotations><xqdoc:annotation name="unit:test"/></xqdoc:annotations><xqdoc:signature>declare %unit:test function tree:test3() as item()*</xqdoc:signature><xqdoc:return><xqdoc:type occurrence="*">item()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>unparsed-text-lines</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://basex.org/modules/unit</xqdoc:uri><xqdoc:name>assert</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>true</xqdoc:name></xqdoc:invoked><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>t</xqdoc:name></xqdoc:ref-variable><xqdoc:body>function tree:test3(){
    let $t:=unparsed-text-lines("tree-data/paths.txt") 
    return unit:assert(fn:true(),$t)
}</xqdoc:body></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description>pseudo main function</xqdoc:description></xqdoc:comment><xqdoc:name>local:xqDoc-main</xqdoc:name><xqdoc:signature>local:xqDoc-main()</xqdoc:signature><xqdoc:body>tree:build($TEST1)/directory[@name="api"]</xqdoc:body><xqdoc:invoked arity="1"><xqdoc:uri>quodatum.data.tree</xqdoc:uri><xqdoc:name>build</xqdoc:name></xqdoc:invoked><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>TEST1</xqdoc:name></xqdoc:ref-variable><xqdoc:body>tree:build($TEST1)/directory[@name="api"]</xqdoc:body></xqdoc:function></xqdoc:functions></xqdoc:xqdoc>