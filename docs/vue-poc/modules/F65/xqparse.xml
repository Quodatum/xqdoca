<XQuery><MainModule><Prolog><ModuleImport><TOKEN>import</TOKEN> <TOKEN>module</TOKEN> <TOKEN>namespace</TOKEN> <NCName>store</NCName> <TOKEN>=</TOKEN> <StringLiteral>'quodatum.store'</StringLiteral> <TOKEN>at</TOKEN> <StringLiteral>"store.xqm"</StringLiteral></ModuleImport><TOKEN>;</TOKEN></Prolog>
<FLWORExpr><LetClause><TOKEN>let</TOKEN> <LetBinding><TOKEN>$</TOKEN><QName>d</QName><TOKEN>:=</TOKEN><DirElemConstructor><TOKEN>&lt;</TOKEN><QName>doc</QName><DirAttributeList/><TOKEN>&gt;</TOKEN><ElementContentChar>t</ElementContentChar><ElementContentChar>e</ElementContentChar><ElementContentChar>s</ElementContentChar><ElementContentChar>t</ElementContentChar><TOKEN>&lt;/</TOKEN><QName>doc</QName><TOKEN>&gt;</TOKEN></DirElemConstructor></LetBinding></LetClause>
<LetClause><TOKEN>let</TOKEN> <LetBinding><TOKEN>$</TOKEN><QName>r</QName><TOKEN>:=</TOKEN><MapConstructor><TOKEN>map</TOKEN><TOKEN>{</TOKEN><MapConstructorEntry><StringLiteral>"uri"</StringLiteral><TOKEN>:</TOKEN><StringLiteral>"foo/test.xml"</StringLiteral></MapConstructorEntry><TOKEN>,</TOKEN><MapConstructorEntry><StringLiteral>"serialization"</StringLiteral><TOKEN>:</TOKEN><MapConstructor><TOKEN>map</TOKEN><TOKEN>{</TOKEN><TOKEN>}</TOKEN></MapConstructor></MapConstructorEntry><TOKEN>,</TOKEN><MapConstructorEntry><StringLiteral>"document"</StringLiteral><TOKEN>:</TOKEN><VarRef><TOKEN>$</TOKEN><QName>d</QName></VarRef></MapConstructorEntry><TOKEN>}</TOKEN></MapConstructor></LetBinding></LetClause>
<LetClause><TOKEN>let</TOKEN> <LetBinding><TOKEN>$</TOKEN><QName>base</QName><TOKEN>:=</TOKEN><StringLiteral>"xmldb:/vuepoc-test/123/"</StringLiteral></LetBinding></LetClause>
(: let $base:=file:path-to-uri("c:\tmp\") :)
<ReturnClause><TOKEN>return</TOKEN> <FunctionCall><QName>store:store</QName><ArgumentList><TOKEN>(</TOKEN><VarRef><TOKEN>$</TOKEN><QName>r</QName></VarRef><TOKEN>,</TOKEN><VarRef><TOKEN>$</TOKEN><QName>base</QName></VarRef><TOKEN>)</TOKEN></ArgumentList></FunctionCall></ReturnClause></FLWORExpr></MainModule>
  
<EOF/></XQuery>