<XQuery>(:~
 : Common RESTXQ access points.
 :
 : @author Christian Gr√ºn, BaseX Team 2005-23, BSD License
 :)
<Module><LibraryModule><ModuleDecl><TOKEN>module</TOKEN> <TOKEN>namespace</TOKEN> <NCName><NCName>dba</NCName></NCName> <TOKEN>=</TOKEN> <URILiteral><StringLiteral>'dba/common'</StringLiteral></URILiteral><Separator><TOKEN>;</TOKEN></Separator></ModuleDecl>

<Prolog><Import><ModuleImport><TOKEN>import</TOKEN> <TOKEN>module</TOKEN> <TOKEN>namespace</TOKEN> <NCName><NCName>html</NCName></NCName> <TOKEN>=</TOKEN> <URILiteral><StringLiteral>'dba/html'</StringLiteral></URILiteral> <TOKEN>at</TOKEN> <URILiteral><StringLiteral>'lib/html.xqm'</StringLiteral></URILiteral></ModuleImport></Import><Separator><TOKEN>;</TOKEN></Separator>

(:~
 : Redirects to the start page.
 : @return redirection
 :)
<AnnotatedDecl><TOKEN>declare</TOKEN>
  <Annotation><TOKEN>%</TOKEN><EQName><QName><FunctionName><QName>rest:path</QName></FunctionName></QName></EQName><TOKEN>(</TOKEN><Literal><StringLiteral>'/dba'</StringLiteral></Literal><TOKEN>)</TOKEN></Annotation>
<FunctionDecl><TOKEN>function</TOKEN> <EQName><QName><FunctionName><QName>dba:redirect</QName></FunctionName></QName></EQName><TOKEN>(</TOKEN>
<TOKEN>)</TOKEN> <TOKEN>as</TOKEN> <SequenceType><ItemType><KindTest><ElementTest><TOKEN>element</TOKEN><TOKEN>(</TOKEN><ElementNameOrWildcard><ElementName><EQName><QName><FunctionName><QName>rest:response</QName></FunctionName></QName></EQName></ElementName></ElementNameOrWildcard><TOKEN>)</TOKEN></ElementTest></KindTest></ItemType></SequenceType> <FunctionBody><EnclosedExpr><TOKEN>{</TOKEN>
  <Expr><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><FunctionCall><FunctionEQName><FunctionName><QName>web:redirect</QName></FunctionName></FunctionEQName><ArgumentList><TOKEN>(</TOKEN><Argument><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><Literal><StringLiteral>'/dba/logs'</StringLiteral></Literal></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></Argument><TOKEN>)</TOKEN></ArgumentList></FunctionCall></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></Expr>
<TOKEN>}</TOKEN></EnclosedExpr></FunctionBody></FunctionDecl></AnnotatedDecl><Separator><TOKEN>;</TOKEN></Separator>

(:~
 : Returns a file.
 : @param  $file  file or unknown path
 : @return rest binary data
 :)
<AnnotatedDecl><TOKEN>declare</TOKEN>
  <Annotation><TOKEN>%</TOKEN><EQName><QName><FunctionName><QName>rest:path</QName></FunctionName></QName></EQName><TOKEN>(</TOKEN><Literal><StringLiteral>'/dba/static/{$file=.+}'</StringLiteral></Literal><TOKEN>)</TOKEN></Annotation>
  <Annotation><TOKEN>%</TOKEN><EQName><QName><FunctionName><QName>output:method</QName></FunctionName></QName></EQName><TOKEN>(</TOKEN><Literal><StringLiteral>'basex'</StringLiteral></Literal><TOKEN>)</TOKEN></Annotation>
  <Annotation><TOKEN>%</TOKEN><EQName><QName><FunctionName><QName>perm:allow</QName></FunctionName></QName></EQName><TOKEN>(</TOKEN><Literal><StringLiteral>'public'</StringLiteral></Literal><TOKEN>)</TOKEN></Annotation>
<FunctionDecl><TOKEN>function</TOKEN> <EQName><QName><FunctionName><QName>dba:file</QName></FunctionName></QName></EQName><TOKEN>(</TOKEN>
  <ParamList><Param><TOKEN>$</TOKEN><EQName><QName><FunctionName><QName>file</QName></FunctionName></QName></EQName>  <TypeDeclaration><TOKEN>as</TOKEN> <SequenceType><ItemType><AtomicOrUnionType><EQName><QName><FunctionName><QName>xs:string</QName></FunctionName></QName></EQName></AtomicOrUnionType></ItemType></SequenceType></TypeDeclaration></Param></ParamList>
<TOKEN>)</TOKEN> <TOKEN>as</TOKEN> <SequenceType><ItemType><TOKEN>item</TOKEN><TOKEN>(</TOKEN><TOKEN>)</TOKEN></ItemType><OccurrenceIndicator><TOKEN>+</TOKEN></OccurrenceIndicator></SequenceType> <FunctionBody><EnclosedExpr><TOKEN>{</TOKEN>
  <Expr><ExprSingle><FLWORExpr><InitialClause><LetClause><TOKEN>let</TOKEN> <LetBinding><TOKEN>$</TOKEN><VarName><EQName><QName><FunctionName><QName>path</QName></FunctionName></QName></EQName></VarName> <TOKEN>:=</TOKEN> <ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><FunctionCall><FunctionEQName><FunctionName><QName>file:base-dir</QName></FunctionName></FunctionEQName><ArgumentList><TOKEN>(</TOKEN><TOKEN>)</TOKEN></ArgumentList></FunctionCall></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr> <TOKEN>||</TOKEN> <RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><Literal><StringLiteral>'static/'</StringLiteral></Literal></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr> <TOKEN>||</TOKEN> <RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><VarRef><TOKEN>$</TOKEN><VarName><EQName><QName><FunctionName><QName>file</QName></FunctionName></QName></EQName></VarName></VarRef></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></LetBinding></LetClause></InitialClause>
  <ReturnClause><TOKEN>return</TOKEN> <ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><ParenthesizedExpr><TOKEN>(</TOKEN>
    <Expr><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><FunctionCall><FunctionEQName><FunctionName><QName>web:response-header</QName></FunctionName></FunctionEQName><ArgumentList><TOKEN>(</TOKEN>
      <Argument><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><MapConstructor><TOKEN>map</TOKEN> <TOKEN>{</TOKEN> <MapConstructorEntry><MapKeyExpr><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><Literal><StringLiteral>'media-type'</StringLiteral></Literal></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></MapKeyExpr><TOKEN>:</TOKEN> <MapValueExpr><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><FunctionCall><FunctionEQName><FunctionName><QName>web:content-type</QName></FunctionName></FunctionEQName><ArgumentList><TOKEN>(</TOKEN><Argument><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><VarRef><TOKEN>$</TOKEN><VarName><EQName><QName><FunctionName><QName>path</QName></FunctionName></QName></EQName></VarName></VarRef></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></Argument><TOKEN>)</TOKEN></ArgumentList></FunctionCall></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></MapValueExpr></MapConstructorEntry> <TOKEN>}</TOKEN></MapConstructor></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></Argument><TOKEN>,</TOKEN>
      <Argument><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><MapConstructor><TOKEN>map</TOKEN> <TOKEN>{</TOKEN> <MapConstructorEntry><MapKeyExpr><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><Literal><StringLiteral>'Cache-Control'</StringLiteral></Literal></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></MapKeyExpr><TOKEN>:</TOKEN> <MapValueExpr><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><Literal><StringLiteral>'max-age=3600,public'</StringLiteral></Literal></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></MapValueExpr></MapConstructorEntry><TOKEN>,</TOKEN> <MapConstructorEntry><MapKeyExpr><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><Literal><StringLiteral>'Content-Length'</StringLiteral></Literal></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></MapKeyExpr><TOKEN>:</TOKEN> <MapValueExpr><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><FunctionCall><FunctionEQName><FunctionName><QName>file:size</QName></FunctionName></FunctionEQName><ArgumentList><TOKEN>(</TOKEN><Argument><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><VarRef><TOKEN>$</TOKEN><VarName><EQName><QName><FunctionName><QName>path</QName></FunctionName></QName></EQName></VarName></VarRef></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></Argument><TOKEN>)</TOKEN></ArgumentList></FunctionCall></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></MapValueExpr></MapConstructorEntry> <TOKEN>}</TOKEN></MapConstructor></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></Argument>
    <TOKEN>)</TOKEN></ArgumentList></FunctionCall></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle><TOKEN>,</TOKEN>
    <ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><FunctionCall><FunctionEQName><FunctionName><QName>file:read-binary</QName></FunctionName></FunctionEQName><ArgumentList><TOKEN>(</TOKEN><Argument><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><VarRef><TOKEN>$</TOKEN><VarName><EQName><QName><FunctionName><QName>path</QName></FunctionName></QName></EQName></VarName></VarRef></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></Argument><TOKEN>)</TOKEN></ArgumentList></FunctionCall></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></Expr>
  <TOKEN>)</TOKEN></ParenthesizedExpr></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></ReturnClause></FLWORExpr></ExprSingle></Expr>
<TOKEN>}</TOKEN></EnclosedExpr></FunctionBody></FunctionDecl></AnnotatedDecl><Separator><TOKEN>;</TOKEN></Separator>

(:~
 : Shows a 'page not found' error.
 : @param  $path  path to unknown page
 : @return page
 :)
<AnnotatedDecl><TOKEN>declare</TOKEN>
  <Annotation><TOKEN>%</TOKEN><EQName><QName><FunctionName><QName>rest:path</QName></FunctionName></QName></EQName><TOKEN>(</TOKEN><Literal><StringLiteral>'/dba/{$path}'</StringLiteral></Literal><TOKEN>)</TOKEN></Annotation>
  <Annotation><TOKEN>%</TOKEN><EQName><QName><FunctionName><QName>output:method</QName></FunctionName></QName></EQName><TOKEN>(</TOKEN><Literal><StringLiteral>'html'</StringLiteral></Literal><TOKEN>)</TOKEN></Annotation>
<FunctionDecl><TOKEN>function</TOKEN> <EQName><QName><FunctionName><QName>dba:unknown</QName></FunctionName></QName></EQName><TOKEN>(</TOKEN>
  <ParamList><Param><TOKEN>$</TOKEN><EQName><QName><FunctionName><QName>path</QName></FunctionName></QName></EQName>  <TypeDeclaration><TOKEN>as</TOKEN> <SequenceType><ItemType><AtomicOrUnionType><EQName><QName><FunctionName><QName>xs:string</QName></FunctionName></QName></EQName></AtomicOrUnionType></ItemType></SequenceType></TypeDeclaration></Param></ParamList>
<TOKEN>)</TOKEN> <TOKEN>as</TOKEN> <SequenceType><ItemType><KindTest><ElementTest><TOKEN>element</TOKEN><TOKEN>(</TOKEN><ElementNameOrWildcard><ElementName><EQName><QName><FunctionName><QName>html</QName></FunctionName></QName></EQName></ElementName></ElementNameOrWildcard><TOKEN>)</TOKEN></ElementTest></KindTest></ItemType></SequenceType> <FunctionBody><EnclosedExpr><TOKEN>{</TOKEN>
  <Expr><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><FunctionCall><FunctionEQName><FunctionName><QName>html:wrap</QName></FunctionName></FunctionEQName><ArgumentList><TOKEN>(</TOKEN>
    <Argument><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><Constructor><DirectConstructor><DirElemConstructor><TOKEN>&lt;</TOKEN><QName><FunctionName><QName>tr</QName></FunctionName></QName><DirAttributeList/><TOKEN>&gt;</TOKEN><DirElemContent><ElementContentChar>
</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><DirectConstructor><DirElemConstructor><TOKEN>&lt;</TOKEN><QName><FunctionName><QName>td</QName></FunctionName></QName><DirAttributeList/><TOKEN>&gt;</TOKEN><DirElemContent><ElementContentChar>
</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><DirectConstructor><DirElemConstructor><TOKEN>&lt;</TOKEN><QName><FunctionName><QName>h2</QName></FunctionName></QName><DirAttributeList/><TOKEN>&gt;</TOKEN><DirElemContent><ElementContentChar>P</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>a</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>g</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>e</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>n</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>o</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>t</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>f</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>o</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>u</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>n</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>d</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>:</ElementContentChar></DirElemContent><TOKEN>&lt;/</TOKEN><QName><FunctionName><QName>h2</QName></FunctionName></QName><TOKEN>&gt;</TOKEN></DirElemConstructor></DirectConstructor></DirElemContent><DirElemContent><ElementContentChar>
</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><DirectConstructor><DirElemConstructor><TOKEN>&lt;</TOKEN><QName><FunctionName><QName>ul</QName></FunctionName></QName><DirAttributeList/><TOKEN>&gt;</TOKEN><DirElemContent><ElementContentChar>
</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><DirectConstructor><DirElemConstructor><TOKEN>&lt;</TOKEN><QName><FunctionName><QName>li</QName></FunctionName></QName><DirAttributeList/><TOKEN>&gt;</TOKEN><DirElemContent><ElementContentChar>P</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>a</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>g</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>e</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>:</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>d</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>b</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>a</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>/</ElementContentChar></DirElemContent><DirElemContent><CommonContent><EnclosedExpr><TOKEN>{</TOKEN> <Expr><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><VarRef><TOKEN>$</TOKEN><VarName><EQName><QName><FunctionName><QName>path</QName></FunctionName></QName></EQName></VarName></VarRef></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></Expr> <TOKEN>}</TOKEN></EnclosedExpr></CommonContent></DirElemContent><TOKEN>&lt;/</TOKEN><QName><FunctionName><QName>li</QName></FunctionName></QName><TOKEN>&gt;</TOKEN></DirElemConstructor></DirectConstructor></DirElemContent><DirElemContent><ElementContentChar>
</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><DirectConstructor><DirElemConstructor><TOKEN>&lt;</TOKEN><QName><FunctionName><QName>li</QName></FunctionName></QName><DirAttributeList/><TOKEN>&gt;</TOKEN><DirElemContent><ElementContentChar>M</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>e</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>t</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>h</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>o</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>d</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar>:</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><CommonContent><EnclosedExpr><TOKEN>{</TOKEN> <Expr><ExprSingle><OrExpr><AndExpr><ComparisonExpr><FTContainsExpr><StringConcatExpr><RangeExpr><AdditiveExpr><MultiplicativeExpr><UnionExpr><IntersectExceptExpr><InstanceofExpr><TreatExpr><CastableExpr><CastExpr><TransformWithExpr><BasexUpdate1Expr><BasexUpdateExpr><ArrowExpr><UnaryExpr><ValueExpr><SimpleMapExpr><PathExpr><RelativePathExpr><StepExpr><PostfixExpr><PrimaryExpr><FunctionCall><FunctionEQName><FunctionName><QName>request:method</QName></FunctionName></FunctionEQName><ArgumentList><TOKEN>(</TOKEN><TOKEN>)</TOKEN></ArgumentList></FunctionCall></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></Expr> <TOKEN>}</TOKEN></EnclosedExpr></CommonContent></DirElemContent><TOKEN>&lt;/</TOKEN><QName><FunctionName><QName>li</QName></FunctionName></QName><TOKEN>&gt;</TOKEN></DirElemConstructor></DirectConstructor></DirElemContent><DirElemContent><ElementContentChar>
</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><TOKEN>&lt;/</TOKEN><QName><FunctionName><QName>ul</QName></FunctionName></QName><TOKEN>&gt;</TOKEN></DirElemConstructor></DirectConstructor></DirElemContent><DirElemContent><ElementContentChar>
</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><TOKEN>&lt;/</TOKEN><QName><FunctionName><QName>td</QName></FunctionName></QName><TOKEN>&gt;</TOKEN></DirElemConstructor></DirectConstructor></DirElemContent><DirElemContent><ElementContentChar>
</ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><DirElemContent><ElementContentChar> </ElementContentChar></DirElemContent><TOKEN>&lt;/</TOKEN><QName><FunctionName><QName>tr</QName></FunctionName></QName><TOKEN>&gt;</TOKEN></DirElemConstructor></DirectConstructor></Constructor></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></Argument>
  <TOKEN>)</TOKEN></ArgumentList></FunctionCall></PrimaryExpr></PostfixExpr></StepExpr></RelativePathExpr></PathExpr></SimpleMapExpr></ValueExpr></UnaryExpr></ArrowExpr></BasexUpdateExpr></BasexUpdate1Expr></TransformWithExpr></CastExpr></CastableExpr></TreatExpr></InstanceofExpr></IntersectExceptExpr></UnionExpr></MultiplicativeExpr></AdditiveExpr></RangeExpr></StringConcatExpr></FTContainsExpr></ComparisonExpr></AndExpr></OrExpr></ExprSingle></Expr>
<TOKEN>}</TOKEN></EnclosedExpr></FunctionBody></FunctionDecl></AnnotatedDecl><Separator><TOKEN>;</TOKEN></Separator></Prolog></LibraryModule></Module>
<EOF/></XQuery>