<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0"><xqdoc:control><xqdoc:date>2019-05-22T11:24:21.502+01:00</xqdoc:date><xqdoc:version>1.1</xqdoc:version></xqdoc:control><xqdoc:module type="library"><xqdoc:uri>quodatum:xqdoca.generator.swagger</xqdoc:uri><xqdoc:name>swagger.xqm</xqdoc:name><xqdoc:comment><xqdoc:description>simple swagger generation 
NOTE this is just shell no detail provided</xqdoc:description><xqdoc:author>Andy Bunce</xqdoc:author><xqdoc:version>0.1</xqdoc:version><xqdoc:custom tag="__source">lib/generators/swagger.xqm</xqdoc:custom></xqdoc:comment><xqdoc:body>xquery version "3.1";

 
 (:~
 : simple swagger generation 
 : NOTE this is just shell no detail provided
 :
 : @author Andy Bunce
 : @version 0.1
 :)
 
(:~
 : Generate XQuery  documentation in html
 : using file:///C:/Users/andy/workspace/app-doc/src/doc/data/doc/models
 : $efolder:="file:///C:/Users/andy/workspace/app-doc/src/doc/data/doc/models"
 : $target:="file:///C:/Users/andy/workspace/app-doc/src/doc/generated/models.xqm"
 :)
module namespace _ = 'quodatum:xqdoca.generator.swagger';

declare namespace xqdoca="https://github.com/Quodatum/xqdoca";


declare 
%xqdoca:global("swagger1","Swagger file (JSON format) from restxq annotations.")
%xqdoca:output("swagger.json","json") 
function _:swagger($state as map(*),
                            $opts as map(*)
                            )                           
{
&lt;json type="object"&gt;
   &lt;swagger&gt;2.0&lt;/swagger&gt;
   &lt;info type="object"&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;
    &lt;title&gt;Generated from { $state?project } at { current-dateTime() }&lt;/title&gt;
    &lt;description&gt;Example generation from RESTXQ xquery sources&lt;/description&gt;
    &lt;termsOfService&gt;http://swagger.io/terms/&lt;/termsOfService&gt;
    &lt;contact type="object"&gt;
     &lt;name&gt;Andy Bunce&lt;/name&gt;
    &lt;/contact&gt;
    &lt;license type="object"&gt;
      &lt;name&gt;MIT&lt;/name&gt;
    &lt;/license&gt;
  &lt;/info&gt;
  &lt;host&gt;github.com/Quodatum/xqdoca&lt;/host&gt;
  &lt;basePath&gt;/api&lt;/basePath&gt;
&lt;/json&gt;
};

</xqdoc:body></xqdoc:module><xqdoc:namespaces><xqdoc:namespace prefix="_" uri="quodatum:xqdoca.generator.swagger"/><xqdoc:namespace prefix="xqdoca" uri="https://github.com/Quodatum/xqdoca"/><xqdoc:namespace prefix="" uri="https://github.com/Quodatum/xqdoca"/></xqdoc:namespaces><xqdoc:imports/><xqdoc:variables/><xqdoc:functions><xqdoc:function arity="2"><xqdoc:name>_:swagger</xqdoc:name><xqdoc:annotations><xqdoc:annotation name="xqdoca:global"><xqdoc:literal type="xs:string">swagger1</xqdoc:literal><xqdoc:literal type="xs:string">Swagger file (JSON format) from restxq annotations.</xqdoc:literal></xqdoc:annotation><xqdoc:annotation name="xqdoca:output"><xqdoc:literal type="xs:string">swagger.json</xqdoc:literal><xqdoc:literal type="xs:string">json</xqdoc:literal></xqdoc:annotation></xqdoc:annotations><xqdoc:signature>declare %Q{https://github.com/Quodatum/xqdoca}global("swagger1", "Swagger file (JSON format) from restxq annotations.") %Q{https://github.com/Quodatum/xqdoca}output("swagger.json", "json") function _:swagger($state as map(*), $opts as map(*)) as item()*</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>state</xqdoc:name><xqdoc:type>map(*)</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>opts</xqdoc:name><xqdoc:type>map(*)</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>element()</xqdoc:type></xqdoc:return><xqdoc:body>function _:swagger($state as map(*),
                            $opts as map(*)
                            )                           
{
&lt;json type="object"&gt;
   &lt;swagger&gt;2.0&lt;/swagger&gt;
   &lt;info type="object"&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;
    &lt;title&gt;Generated from { $state?project } at { current-dateTime() }&lt;/title&gt;
    &lt;description&gt;Example generation from RESTXQ xquery sources&lt;/description&gt;
    &lt;termsOfService&gt;http://swagger.io/terms/&lt;/termsOfService&gt;
    &lt;contact type="object"&gt;
     &lt;name&gt;Andy Bunce&lt;/name&gt;
    &lt;/contact&gt;
    &lt;license type="object"&gt;
      &lt;name&gt;MIT&lt;/name&gt;
    &lt;/license&gt;
  &lt;/info&gt;
  &lt;host&gt;github.com/Quodatum/xqdoca&lt;/host&gt;
  &lt;basePath&gt;/api&lt;/basePath&gt;
&lt;/json&gt;
}</xqdoc:body><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>current-dateTime</xqdoc:name></xqdoc:invoked><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>state</xqdoc:name></xqdoc:ref-variable></xqdoc:function></xqdoc:functions></xqdoc:xqdoc>