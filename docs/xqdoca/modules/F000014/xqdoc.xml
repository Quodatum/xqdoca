<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0"><xqdoc:control><xqdoc:date>2022-09-07T11:29:31.556+01:00</xqdoc:date><xqdoc:version>1.1</xqdoc:version></xqdoc:control><xqdoc:module type="library"><xqdoc:uri>quodatum:command:tools</xqdoc:uri><xqdoc:name>command.xqm</xqdoc:name><xqdoc:comment><xqdoc:description><h1>command.xqm</h1>
<p>command line tool support.</p></xqdoc:description><xqdoc:author>Andy Bunce</xqdoc:author><xqdoc:version>0.3</xqdoc:version><xqdoc:custom tag="__source">lib/command.xqm</xqdoc:custom></xqdoc:comment><xqdoc:body>xquery version "3.1";&#xD;
(:&#xD;
 : Copyright (c) 2019-2022 Quodatum Ltd&#xD;
 :&#xD;
 : Licensed under the Apache License, Version 2.0 (the "License");&#xD;
 : you may not use this file except in compliance with the License.&#xD;
 : You may obtain a copy of the License at&#xD;
 :&#xD;
 :     http://www.apache.org/licenses/LICENSE-2.0&#xD;
 :&#xD;
 : Unless required by applicable law or agreed to in writing, software&#xD;
 : distributed under the License is distributed on an "AS IS" BASIS,&#xD;
 : WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&#xD;
 : See the License for the specific language governing permissions and&#xD;
 : limitations under the License.&#xD;
 :)&#xD;
 &#xD;
 (:~&#xD;
 : &lt;h1&gt;command.xqm&lt;/h1&gt;&#xD;
 : &lt;p&gt;command line tool support.&lt;/p&gt;&#xD;
 :&#xD;
 : @author Andy Bunce&#xD;
 : @version 0.3&#xD;
 :)&#xD;
module namespace cmd = 'quodatum:command:tools';&#xD;
declare namespace pkg="http://expath.org/ns/pkg";&#xD;
&#xD;
(:~  simple command line parse splits on space unless in quotes :)&#xD;
declare function cmd:parse-args($str as xs:string)&#xD;
as xs:string*{&#xD;
let $r:= fold-left(&#xD;
   string-to-codepoints($str)! codepoints-to-string(.),&#xD;
   map{"state": "","tokens":(),"current":""},&#xD;
   cmd:parse2#2) &#xD;
return ($r?tokens, if(string-length($r?current) ne 0) then $r?current else ())&#xD;
};&#xD;
&#xD;
declare %private function cmd:parse2($state as map(*),$char as xs:string)&#xD;
as map(*){&#xD;
 let $new:=switch ($char)&#xD;
 case '"'&#xD;
 case "'" return map:entry("state",if($state?state eq $char) then "" else $char)               &#xD;
                   &#xD;
 case ' ' return if($state?state eq "")&#xD;
                  then if(string-length($state?current) ne 0)&#xD;
                       then  map {  "tokens": ($state?tokens,$state?current), "current": ""}&#xD;
                       else ()&#xD;
                 else map:entry("current", $state?current || $char)&#xD;
                 &#xD;
  default return  map:entry("current", $state?current || $char)&#xD;
  return map:merge(($new,$state))       &#xD;
};&#xD;
&#xD;
(:~ raise error if deps missing &#xD;
@return version :)&#xD;
declare function cmd:check-dependancies($pkg as element(pkg:package))&#xD;
as empty-sequence(){&#xD;
  let $basex:=$pkg/pkg:dependency[@processor="http://basex.org/"]/@version/string()&#xD;
  let $basex-active:= db:system()/generalinformation/version/tokenize(.," ")[1]&#xD;
  return &#xD;
  &#xD;
  if( $basex-active ne $basex)&#xD;
  then error(xs:QName("pkg:version"),``[BaseX version `{ $basex-active }` may not be supported]``)&#xD;
  else (&#xD;
         for $p in $pkg/pkg:dependency[@name]&#xD;
         return if(cmd:is-missing($p/@name,$p/@version)) &#xD;
                then error(xs:QName("pkg:missing"),"Not installed: " || $p/@name) &#xD;
                else ()&#xD;
        )&#xD;
};&#xD;
&#xD;
declare function cmd:is-missing($name as xs:string,$version as xs:string)&#xD;
as xs:boolean{&#xD;
    repo:list()[@name=$name and @version eq $version]=&gt;empty() &#xD;
};&#xD;
&#xD;
declare function cmd:package-source($name as xs:string,$version as xs:string)&#xD;
as xs:string{&#xD;
    switch ($name || "@" || $version)&#xD;
    case "http://expkg-zone58.github.io/ex-xparse@0.7.8"&#xD;
         return  "https://github.com/expkg-zone58/ex-xparse/releases/download/v0.7.8/ex-xparse-0.7.8.xar"&#xD;
    default return error(xs:QName("pkg:version"),"no source for :" || $name) &#xD;
};&#xD;
&#xD;
declare function cmd:install($pkg as element(pkg:package))&#xD;
as empty-sequence(){&#xD;
    for  $p in $pkg/pkg:dependency[@name]&#xD;
    where cmd:is-missing($p/@name,$p/@version)&#xD;
    let $src:=cmd:package-source($p/@name,$p/@version)&#xD;
    return repo:install($src=&gt;trace("Installing: "))&#xD;
};&#xD;
</xqdoc:body></xqdoc:module><xqdoc:imports/><xqdoc:namespaces><xqdoc:namespace prefix="cmd" uri="quodatum:command:tools"/><xqdoc:namespace prefix="pkg" uri="http://expath.org/ns/pkg"/><xqdoc:namespace prefix="ann" uri="http://www.w3.org/2012/xquery"/></xqdoc:namespaces><xqdoc:variables/><xqdoc:functions><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description>simple command line parse splits on space unless in quotes</xqdoc:description></xqdoc:comment><xqdoc:name>cmd:parse-args</xqdoc:name><xqdoc:signature>declare function cmd:parse-args($str as xs:string) as xs:string*</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>str</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type occurrence="*">xs:string</xqdoc:type></xqdoc:return><xqdoc:invoked arity="3"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>fold-left</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string-to-codepoints</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>codepoints-to-string</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string-length</xqdoc:name></xqdoc:invoked><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>str</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>r</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>r</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>r</xqdoc:name></xqdoc:ref-variable><xqdoc:body>function cmd:parse-args($str as xs:string)&#xD;
as xs:string*{&#xD;
let $r:= fold-left(&#xD;
   string-to-codepoints($str)! codepoints-to-string(.),&#xD;
   map{"state": "","tokens":(),"current":""},&#xD;
   cmd:parse2#2) &#xD;
return ($r?tokens, if(string-length($r?current) ne 0) then $r?current else ())&#xD;
}</xqdoc:body></xqdoc:function><xqdoc:function arity="2"><xqdoc:name>cmd:parse2</xqdoc:name><xqdoc:annotations><xqdoc:annotation name="private"/></xqdoc:annotations><xqdoc:signature>declare %private function cmd:parse2($state as map(*) , $char as xs:string) as map(*)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>state</xqdoc:name><xqdoc:type>map(*)</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>char</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>map(*)</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions/map</xqdoc:uri><xqdoc:name>entry</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string-length</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions/map</xqdoc:uri><xqdoc:name>entry</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions/map</xqdoc:uri><xqdoc:name>entry</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions/map</xqdoc:uri><xqdoc:name>merge</xqdoc:name></xqdoc:invoked><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>char</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>state</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>char</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>char</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>state</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>state</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>state</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>state</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>state</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>char</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>state</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>char</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>new</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>state</xqdoc:name></xqdoc:ref-variable><xqdoc:body>function cmd:parse2($state as map(*),$char as xs:string)&#xD;
as map(*){&#xD;
 let $new:=switch ($char)&#xD;
 case '"'&#xD;
 case "'" return map:entry("state",if($state?state eq $char) then "" else $char)               &#xD;
                   &#xD;
 case ' ' return if($state?state eq "")&#xD;
                  then if(string-length($state?current) ne 0)&#xD;
                       then  map {  "tokens": ($state?tokens,$state?current), "current": ""}&#xD;
                       else ()&#xD;
                 else map:entry("current", $state?current || $char)&#xD;
                 &#xD;
  default return  map:entry("current", $state?current || $char)&#xD;
  return map:merge(($new,$state))       &#xD;
}</xqdoc:body></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description>raise error if deps missing</xqdoc:description><xqdoc:return>version</xqdoc:return></xqdoc:comment><xqdoc:name>cmd:check-dependancies</xqdoc:name><xqdoc:signature>declare function cmd:check-dependancies($pkg as element(pkg:package)) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>pkg</xqdoc:name><xqdoc:type>element(pkg:package)</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="0"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://basex.org/modules/db</xqdoc:uri><xqdoc:name>system</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>tokenize</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2001/XMLSchema</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>quodatum:command:tools</xqdoc:uri><xqdoc:name>is-missing</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2001/XMLSchema</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>pkg</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>basex-active</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>basex</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>basex-active</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>pkg</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>p</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>p</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>p</xqdoc:name></xqdoc:ref-variable><xqdoc:body>function cmd:check-dependancies($pkg as element(pkg:package))&#xD;
as empty-sequence(){&#xD;
  let $basex:=$pkg/pkg:dependency[@processor="http://basex.org/"]/@version/string()&#xD;
  let $basex-active:= db:system()/generalinformation/version/tokenize(.," ")[1]&#xD;
  return &#xD;
  &#xD;
  if( $basex-active ne $basex)&#xD;
  then error(xs:QName("pkg:version"),``[BaseX version `{ $basex-active }` may not be supported]``)&#xD;
  else (&#xD;
         for $p in $pkg/pkg:dependency[@name]&#xD;
         return if(cmd:is-missing($p/@name,$p/@version)) &#xD;
                then error(xs:QName("pkg:missing"),"Not installed: " || $p/@name) &#xD;
                else ()&#xD;
        )&#xD;
}</xqdoc:body></xqdoc:function><xqdoc:function arity="2"><xqdoc:name>cmd:is-missing</xqdoc:name><xqdoc:signature>declare function cmd:is-missing($name as xs:string , $version as xs:string) as xs:boolean</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>version</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return><xqdoc:invoked arity="0"><xqdoc:uri>http://basex.org/modules/repo</xqdoc:uri><xqdoc:name>list</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>empty</xqdoc:name></xqdoc:invoked><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>name</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>version</xqdoc:name></xqdoc:ref-variable><xqdoc:body>function cmd:is-missing($name as xs:string,$version as xs:string)&#xD;
as xs:boolean{&#xD;
    repo:list()[@name=$name and @version eq $version]=&gt;empty() &#xD;
}</xqdoc:body></xqdoc:function><xqdoc:function arity="2"><xqdoc:name>cmd:package-source</xqdoc:name><xqdoc:signature>declare function cmd:package-source($name as xs:string , $version as xs:string) as xs:string</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>version</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:string</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2001/XMLSchema</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>name</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>version</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>name</xqdoc:name></xqdoc:ref-variable><xqdoc:body>function cmd:package-source($name as xs:string,$version as xs:string)&#xD;
as xs:string{&#xD;
    switch ($name || "@" || $version)&#xD;
    case "http://expkg-zone58.github.io/ex-xparse@0.7.8"&#xD;
         return  "https://github.com/expkg-zone58/ex-xparse/releases/download/v0.7.8/ex-xparse-0.7.8.xar"&#xD;
    default return error(xs:QName("pkg:version"),"no source for :" || $name) &#xD;
}</xqdoc:body></xqdoc:function><xqdoc:function arity="1"><xqdoc:name>cmd:install</xqdoc:name><xqdoc:signature>declare function cmd:install($pkg as element(pkg:package)) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>pkg</xqdoc:name><xqdoc:type>element(pkg:package)</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>quodatum:command:tools</xqdoc:uri><xqdoc:name>is-missing</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>quodatum:command:tools</xqdoc:uri><xqdoc:name>package-source</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://basex.org/modules/repo</xqdoc:uri><xqdoc:name>install</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="4"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>trace</xqdoc:name></xqdoc:invoked><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>pkg</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>p</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>p</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>p</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>p</xqdoc:name></xqdoc:ref-variable><xqdoc:ref-variable><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>src</xqdoc:name></xqdoc:ref-variable><xqdoc:body>function cmd:install($pkg as element(pkg:package))&#xD;
as empty-sequence(){&#xD;
    for  $p in $pkg/pkg:dependency[@name]&#xD;
    where cmd:is-missing($p/@name,$p/@version)&#xD;
    let $src:=cmd:package-source($p/@name,$p/@version)&#xD;
    return repo:install($src=&gt;trace("Installing: "))&#xD;
}</xqdoc:body></xqdoc:function></xqdoc:functions></xqdoc:xqdoc>